{"version":3,"sources":["../../../app-src/util/decorators/Controller.js"],"names":["controller","selectors","elements","map","selector","document","querySelector","constructor","originalConstructor","newConstructor","instance","Object","getOwnPropertyNames","prototype","forEach","property","Reflect","hasMetadata","bindUIAction","getMetaData","metadata","addEventListener","event","prevent","preventDefault","propertyKey"],"mappings":";;;AAAO,WAASA,UAAT,CAAoB,GAAGC,SAAvB,EAAkC;AACvC,UAAMC,WAAWD,UAAUE,GAAV,CAAcC,YAAYC,SAASC,aAAT,CAAuBF,QAAvB,CAA1B,CAAjB;;AAEA,WAAO,UAASG,WAAT,EAAsB;AAC3B,YAAMC,sBAAsBD,WAA5B;;AAEA,YAAME,iBAAiB,YAAW;AAChC,cAAMC,WAAW,IAAIF,mBAAJ,CAAwB,GAAGN,QAA3B,CAAjB;;AAEAS,eACGC,mBADH,CACuBJ,oBAAoBK,SAD3C,EAEGC,OAFH,CAEWC,YAAY;AACnB,cAAGC,QAAQC,WAAR,CAAoB,WAApB,EAAiCP,QAAjC,EAA2CK,QAA3C,CAAH,EAAyD;AACvDG,yBAAaR,QAAb,EAAuBM,QAAQG,WAAR,CAAoB,WAApB,EAAiCT,QAAjC,EAA2CK,QAA3C,CAAvB;AACD;AACF,SANH;AAOD,OAVD;;AAYAN,qBAAeI,SAAf,GAA2BL,oBAAoBK,SAA/C;;AAEA,aAAOJ,cAAP;AACD,KAlBD;AAmBD;;wBAtBeT,U;;AAwBhB,WAASkB,YAAT,CAAsBR,QAAtB,EAAgCU,QAAhC,EAA0C;AACxCf,aACGC,aADH,CACiBc,SAAShB,QAD1B,EAEGiB,gBAFH,CAEoBD,SAASE,KAF7B,EAEoCA,SAAS;AACzC,UAAGF,SAASG,OAAZ,EAAqB;AACnBD,cAAME,cAAN;AACD;;AAEDd,eAASU,SAASK,WAAlB,EAA+BH,KAA/B;AACD,KARH;AASD","file":"Controller.js","sourcesContent":["export function controller(...selectors) {\r\n  const elements = selectors.map(selector => document.querySelector(selector));\r\n  \r\n  return function(constructor) {\r\n    const originalConstructor = constructor;\r\n\r\n    const newConstructor = function() {\r\n      const instance = new originalConstructor(...elements);\r\n\r\n      Object\r\n        .getOwnPropertyNames(originalConstructor.prototype)\r\n        .forEach(property => {\r\n          if(Reflect.hasMetadata('bindEvent', instance, property)) {\r\n            bindUIAction(instance, Reflect.getMetaData('bindEvent', instance, property));\r\n          }\r\n        });\r\n    }\r\n\r\n    newConstructor.prototype = originalConstructor.prototype;\r\n\r\n    return newConstructor;\r\n  }\r\n}\r\n\r\nfunction bindUIAction(instance, metadata) {\r\n  document\r\n    .querySelector(metadata.selector)\r\n    .addEventListener(metadata.event, event => {\r\n      if(metadata.prevent) {\r\n        event.preventDefault();\r\n      }\r\n\r\n      instance[metadata.propertyKey](event);\r\n    });\r\n}"]}